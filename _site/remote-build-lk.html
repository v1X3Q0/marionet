<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=" media="screen" type="text/css">
    <link rel="stylesheet" href="/assets/css/print.css" media="print" type="text/css">

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>MARIONET | Vulnerability Research</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="MARIONET" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Vulnerability Research" />
<meta property="og:description" content="Vulnerability Research" />
<meta property="og:site_name" content="MARIONET" />
<script type="application/ld+json">
{"@type":"WebPage","url":"/remote-build-lk.html","headline":"MARIONET","description":"Vulnerability Research","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>
    <header>
      <div class="inner">
        <a href="/">
          <h1>MARIONET</h1>
        </a>
        <h2>Vulnerability Research</h2>
        
        
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h2 id="remote-building-and-installing-linux-kernel">Remote Building and installing linux kernel</h2>
<p>To remote build the linux kernel and install it to a separate ubuntu machine, first install dependencies.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install build-essential libncurses-dev bison \
                    flex libssl-dev libelf-dev
</code></pre></div></div>

<p>Ubuntu 18 uses the linux kernel 4.15, so we’ll grab a base copy of the 4.15.0 kernel:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://github.com/torvalds/linux/archive/v4.15.zip
unzip 4.15.zip
cd 4.15.zip
</code></pre></div></div>
<p>then copy the config file used from another operating ubuntu box:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cp /boot/config-$(uname -r) .config
</code></pre></div></div>
<p>then prepare the configuration file with:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make menuconfig
</code></pre></div></div>
<p>xconfig is also viable, but menuconfig may provide more options. In my opinion,
it is also more stable. If you are trying to develop drivers for fuzzing, usb 
drivers can be found following</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; Device Drivers &gt; USB support
</code></pre></div></div>
<p>The modules by default are loaded into the linux kernel as one piece, but to
make them separate modules, change the * next to the module to a M, for example:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;M&gt;   xHCI HCD (USB 3.0) support
</code></pre></div></div>
<p>This action doesn’t seem like much, but if you are trying to fuzz that module,
it helps to have it separate for debugging purposes. For any modifications to
the ethernet devices, namely e1000, changes need to be made in:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; Device Drivers &gt; Network device support &gt; Ethernet driver support
</code></pre></div></div>
<p>Now that you have a proper menuconfig built, proceed with a simple make command</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make -j
</code></pre></div></div>
<p>Now setting the install directory to a location that we can easily copy all the modules from to the location / on the target remote ubuntu box:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make INSTALL_MOD_DIR=$(pwd)/../l15inst \
INSTALL_MOD_PATH=$(pwd)/../l15inst modules_install
</code></pre></div></div>

<p><a href="./">back</a></p>

        </section>

        <aside id="sidebar">
          

          

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</p>
        </aside>
      </div>
    </div>

    
  </body>
</html>
